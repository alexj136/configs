# Alex's i3wm config file
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# i3-gaps only settings
smart_gaps on
gaps inner 10

set $mod Mod4
set $term terminator

# Default border options
new_window pixel 2
hide_edge_borders smart

# Per application border settings
for_window [class=".*"] border pixel 2
for_window [class="Pavucontrol"] floating enable 
for_window [window_role="Msgcompose"] floating enable

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Inconsolata 11

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec $term
bindsym $mod+t exec $term

# Launch chromium
bindsym $mod+y exec chromium || chromium-browser

# Launch gnome-mplayer
bindsym $mod+m exec gnome-mplayer

# Launch evince
bindsym $mod+u exec evince

# Run rofi
bindsym $mod+space exec rofi -show run

# kill focused window
bindsym $mod+Shift+q kill

# Volume keys
set $raiseVol "amixer -M set Master 5%+"
set $lowerVol "amixer -M set Master 5%-"
set $muteVol "amixer set Master toggle"

bindsym XF86AudioRaiseVolume exec $raiseVol
bindsym XF86AudioLowerVolume exec $lowerVol
bindsym XF86AudioMute exec $muteVol

bindsym $mod+0 exec $muteVol
bindsym $mod+equal exec $raiseVol
bindsym $mod+minus exec $lowerVol

bindsym XF86AudioPause exec cmus-remote --pause
bindsym XF86AudioNext exec cmus-remote --next
bindsym XF86AudioPrev exec cmus-remote --prev

# Lock screen
bindsym $mod+Shift+z exec i3lock -e -c 002b36

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# split in horizontal orientation
bindsym $mod+b split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+n focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# switch workspaces
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9

# Next workspace with $mod+Tab, previous with $mod+Shift+Tab
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev

# Asking to change to the focused workspace focuses the previously focused one
workspace_auto_back_and_forth yes

# Reload configuration file
bindsym $mod+Shift+c reload

# Restart i3 (preserves session)
bindsym $mod+Shift+r restart

# Exit i3 and logout
bindsym $mod+Shift+x exec "i3-msg exit"
#bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# Sreen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 5
bindsym XF86MonBrightnessDown exec xbacklight -dec 5

# Print screen
bindsym Print exec sh $HOME/.dotfiles/scripts/screenshot.sh

# Resize window (mouse also works)
mode "resize" {
    bindsym h resize shrink width 4 px or 1 ppt
    bindsym j resize grow height 4 px or 1 ppt
    bindsym k resize shrink height 4 px or 1 ppt
    bindsym l resize grow width 4 px or 1 ppt

    # Return to normal mode with enter or escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# Focus does not follow the cursor
focus_follows_mouse no

# Bar configuration
bar {
    position top
    tray_output primary
    workspace_buttons yes
    status_command i3blocks -c $HOME/.config/i3/blocks
    colors {
        background $dark_base03
        # class            border        background    text
        focused_workspace  $dark_base03  $dark_base_2  $dark_base01
        active_workspace   $dark_base03  $dark_base03  $dark_base_1
        inactive_workspace $dark_base03  $dark_base03  $dark_base_1
        urgent_workspace   $dark_base03  $accent_red   $dark_base03
    }
	#i3bar_command killall -q polybar; while pgrep -u $UID -x polybar >/dev/null;do sleep 1; done; polybar mybar &
}

# Colour configuration
set $dark_base03 #002b36
set $dark_base02 #073642
set $dark_base01 #586e75
set $dark_base00 #657b83
set $dark_base_0 #839496
set $dark_base_1 #93a1a1
set $dark_base_2 #eee8d5
set $dark_base_3 #fdf6e3

set $accent_yellow  #b58900
set $accent_orange  #cb4b16
set $accent_red     #dc322f
set $accent_magenta #d33682
set $accent_violet  #6c71c4
set $accent_blue    #268bd2
set $accent_cyan    #2aa198
set $accent_green   #859900

# class                 border       background   text         indicator
client.focused          $dark_base_2 $dark_base_2 $dark_base01 $dark_base_2
client.focused_inactive $dark_base03 $dark_base03 $dark_base_1 $dark_base03
client.unfocused        $dark_base03 $dark_base03 $dark_base_1 $dark_base03
client.urgent           $dark_base03 $accent_red  $dark_base03 $dark_base03
